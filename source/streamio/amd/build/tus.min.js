function _typeof2(e){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(e){return typeof e}}else{_typeof2=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof2(e)}(function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module){module.exports=e()}else if("function"==typeof define&&define.amd){define ("mediatimesrc_streamio/tus",[],e)}else{var t;if("undefined"!=typeof window){t=window}else if("undefined"!=typeof global){t=global}else if("undefined"!=typeof self){t=self}else{t=this}t.tus=e()}})(function(){var e;return function(){function l(s,e,r){function t(u,n){if(!e[u]){if(!s[u]){var i="function"==typeof require&&require;if(!n&&i)return i(u,!0);if(o)return o(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var a=e[u]={exports:{}};s[u][0].call(a.exports,function(e){var r=s[u][1][e];return t(r||e)},a,a.exports,l,s,e,r)}return e[u].exports}for(var o="function"==typeof require&&require,n=0;n<r.length;n++){t(r[n])}return t}return l}()({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=void 0;var g=o(e("./isReactNative.js")),m=o(e("./uriToBlob.js")),_=o(e("./sources/FileSource.js")),b=o(e("./sources/StreamSource.js"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){"@babel/helpers - typeof";return l="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},l(e)}function s(){s=function(){return C};var A,C={},e=Object.prototype,t=e.hasOwnProperty,R=Object.defineProperty||function(o,t,e){o[t]=e.value},r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function f(o,t,e){return Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),o[t]}try{f({},"")}catch(e){f=function(o,t,e){return o[t]=e}}function h(o,t,e,r){var n=t&&t.prototype instanceof _?t:_,l=Object.create(n.prototype),a=new L(r||[]);return R(l,"_invoke",{value:S(o,e,a)}),l}function m(o,t,e){try{return{type:"normal",arg:o.call(t,e)}}catch(e){return{type:"throw",arg:e}}}C.wrap=h;var c={};function _(){}function b(){}function w(){}var i={};f(i,n,function(){return this});var u=Object.getPrototypeOf,d=u&&u(u(B([])));d&&d!==e&&t.call(d,n)&&(i=d);var y=w.prototype=_.prototype=Object.create(i);function U(r){["next","throw","return"].forEach(function(o){f(r,o,function(e){return this._invoke(o,e)})})}function x(n,o){function s(e,r,d,i){var a=m(n[e],n,r);if("throw"!==a.type){var p=a.arg,u=p.value;return u&&"object"==l(u)&&t.call(u,"__await")?o.resolve(u.__await).then(function(e){s("next",e,d,i)},function(e){s("throw",e,d,i)}):o.resolve(u).then(function(e){p.value=e,d(p)},function(e){return s("throw",e,d,i)})}i(a.arg)}var u;R(this,"_invoke",{value:function(a,t){function e(){return new o(function(o,e){s(a,t,o,e)})}return u=u?u.then(e,e):e()}})}function S(t,e,r){var n="suspendedStart";return function(o,l){if(n=="executing")throw new Error("Generator is already running");if(n=="completed"){if("throw"===o)throw l;return{value:A,done:!0}}for(r.method=o,r.arg=l;;){var a=r.delegate;if(a){var i=P(a,r);if(i){if(i===c)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n=="suspendedStart")throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=m(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===c)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function P(t,e){var r=e.method,n=t.iterator[r];if(n===A)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=A,P(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),c;var o=m(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,c;var l=o.arg;return l?l.done?(e[t.resultName]=l.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=A),e.delegate=null,c):l:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function E(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function k(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function B(a){if(a||""===a){var e=a[n];if(e)return e.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var r=-1,s=function e(){for(;++r<a.length;){if(t.call(a,r))return e.value=a[r],e.done=!1,e}return e.value=A,e.done=!0,e};return s.next=s}}throw new TypeError(l(a)+" is not iterable")}return b.prototype=w,R(y,"constructor",{value:w,configurable:!0}),R(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,a,"GeneratorFunction"),C.isGeneratorFunction=function(r){var t="function"==typeof r&&r.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},C.awrap=function(e){return{__await:e}},U(x.prototype),f(x.prototype,o,function(){return this}),C.AsyncIterator=x,C.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var l=new x(h(e,t,r,n),o);return C.isGeneratorFunction(t)?l:l.next().then(function(e){return e.done?e.value:l.next()})},U(y),f(y,a,"Generator"),f(y,n,function(){return this}),f(y,"toString",function(){return"[object Generator]"}),C.keys=function(o){var a=Object(o),e=[];for(var t in a){e.push(t)}return e.reverse(),function r(){for(;e.length;){var o=e.pop();if(o in a)return r.value=o,r.done=!1,r}return r.done=!0,r}},C.values=B,L.prototype={constructor:L,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=A,this.done=!1,this.delegate=null,this.method="next",this.arg=A,this.tryEntries.forEach(k),!o)for(var e in this){"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=A)}},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(l){if(this.done)throw l;var s=this;function e(e,t){return i.type="throw",i.arg=l,s.next=e,t&&(s.method="next",s.arg=A),!!t}for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r],i=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var a=t.call(n,"catchLoc"),d=t.call(n,"finallyLoc");if(a&&d){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(n,l){for(var e=this.tryEntries.length-1,s;0<=e;--e){s=this.tryEntries[e];if(s.tryLoc<=this.prev&&t.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var u=s;break}}u&&("break"===n||"continue"===n)&&u.tryLoc<=l&&l<=u.finallyLoc&&(u=null);var d=u?u.completion:{};return d.type=n,d.arg=l,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(d)},complete:function(r,t){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&t&&(this.next=t),c},finish:function(o){for(var t=this.tryEntries.length-1,n;0<=t;--t){n=this.tryEntries[t];if(n.finallyLoc===o)return this.complete(n.completion,n.afterLoc),k(n),c}},catch:function(a){for(var t=this.tryEntries.length-1,l;0<=t;--t){l=this.tryEntries[t];if(l.tryLoc===a){var i=l.completion;if("throw"===i.type){var n=i.arg;k(l)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:B(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=A),c}},C}function u(e,t,r,o,n,a,l){try{var i=e[a](l),s=i.value}catch(e){r(e);return}if(i.done){t(s)}else{Promise.resolve(s).then(o,n)}}function d(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var i=e.apply(t,r);function a(e){u(i,o,n,a,l,"next",e)}function l(e){u(i,o,n,a,l,"throw",e)}a(void 0)})}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){for(var r=0,o;r<t.length;r++){o=t[r];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,h(o.key),o)}}function c(e,t,r){if(t)f(e.prototype,t);if(r)f(e,r);Object.defineProperty(e,"prototype",{writable:!1});return e}function h(e){var t=y(e,"string");return"symbol"===l(t)?t:t+""}function y(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if("object"!==l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}r["default"]=function(){function e(){p(this,e)}c(e,[{key:"openFile",value:function(){var e=d(s().mark(function e(t,r){var o;return s().wrap(function(e){while(1){switch(e.prev=e.next){case 0:if(!((0,g["default"])()&&t&&"undefined"!=typeof t.uri)){e.next=11;break}e.prev=1;e.next=4;return(0,m["default"])(t.uri);case 4:o=e.sent;return e.abrupt("return",new _["default"](o));case 8:e.prev=8;e.t0=e["catch"](1);throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e.t0));case 11:if(!("function"==typeof t.slice&&"undefined"!=typeof t.size)){e.next=13;break}return e.abrupt("return",Promise.resolve(new _["default"](t)));case 13:if(!("function"==typeof t.read)){e.next=18;break}r=+r;if(Number.isFinite(r)){e.next=17;break}return e.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return e.abrupt("return",Promise.resolve(new b["default"](t,r)));case 18:return e.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return e.stop();}}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}()}]);return e}();return r.default},{"./isReactNative.js":5,"./sources/FileSource.js":6,"./sources/StreamSource.js":7,"./uriToBlob.js":10}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=function(e,t){if((0,a["default"])()){return Promise.resolve(o(e,t))}return Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))};var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./isReactNative.js"));function o(e,t){var r=e.exif?n(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}function n(e){var t=0;if(0===e.length){return t}for(var r=0,o;r<e.length;r++){o=e.charCodeAt(r);t=(t<<5)-t+o;t&=t}return t}},{"./isReactNative.js":5}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=void 0;function n(e){"@babel/helpers - typeof";return n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},n(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0,o;r<t.length;r++){o=t[r];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,s(o.key),o)}}function i(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);Object.defineProperty(e,"prototype",{writable:!1});return e}function s(e){var t=u(e,"string");return"symbol"===n(t)?t:t+""}function u(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var d=r["default"]=function(){function e(){a(this,e)}i(e,[{key:"createRequest",value:function(e,t){return new p(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]);return e}(),p=function(){function e(t,r){a(this,e);this._xhr=new XMLHttpRequest;this._xhr.open(t,r,!0);this._method=t;this._url=r;this._headers={}}i(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t);this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(t){if(!("upload"in this._xhr)){return}this._xhr.upload.onprogress=function(r){if(!r.lengthComputable){return}t(r.loaded)}}},{key:"send",value:function(){var e=this,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(r,o){e._xhr.onload=function(){r(new f(e._xhr))};e._xhr.onerror=function(e){o(e)};e._xhr.send(t)})}},{key:"abort",value:function(){this._xhr.abort();return Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]);return e}(),f=function(){function e(t){a(this,e);this._xhr=t}i(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]);return e}()},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});Object.defineProperty(r,"DefaultHttpStack",{enumerable:!0,get:function(){return P["default"]}});Object.defineProperty(r,"DetailedError",{enumerable:!0,get:function(){return x["default"]}});r.Upload=void 0;Object.defineProperty(r,"canStoreURLs",{enumerable:!0,get:function(){return S.canStoreURLs}});r.defaultOptions=void 0;Object.defineProperty(r,"enableDebugLog",{enumerable:!0,get:function(){return U.enableDebugLog}});r.isSupported=void 0;var v=o(e("../upload.js")),w=o(e("../noopUrlStorage.js")),U=e("../logger.js"),x=o(e("../error.js")),S=e("./urlStorage.js"),P=o(e("./httpStack.js")),E=o(e("./fileReader.js")),k=o(e("./fileSignature.js"));function o(e){return e&&e.__esModule?e:{default:e}}function n(e){"@babel/helpers - typeof";return n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},n(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0,o;r<t.length;r++){o=t[r];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,_(o.key),o)}}function i(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);Object.defineProperty(e,"prototype",{writable:!1});return e}function s(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});Object.defineProperty(e,"prototype",{writable:!1});if(t)u(e,t)}function u(e,t){u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){e.__proto__=t;return e};return u(e,t)}function d(e){var t=c();return function(){var r=h(e),o;if(t){var n=h(this).constructor;o=Reflect.construct(r,arguments,n)}else{o=r.apply(this,arguments)}return p(this,o)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t)){return t}else if(void 0!==t){throw new TypeError("Derived constructors may only return object or undefined")}return f(e)}function f(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return!0}catch(t){return!1}}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function y(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function g(o){for(var e=1,n;e<arguments.length;e++){n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach(function(e){m(o,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function m(e,t,r){t=_(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0})}else{e[t]=r}return e}function _(e){var t=b(e,"string");return"symbol"===n(t)?t:t+""}function b(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var L=r.defaultOptions=g(g({},v["default"].defaultOptions),{},{httpStack:new P["default"],fileReader:new E["default"],urlStorage:S.canStoreURLs?new S.WebStorageUrlStorage:new w["default"],fingerprint:k["default"]}),B=r.Upload=function(e){s(t,e);var r=d(t);function t(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};a(this,t);o=g(g({},L),o);return r.call(this,e,o)}i(t,null,[{key:"terminate",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};t=g(g({},L),t);return v["default"].terminate(e,t)}}]);return t}(v["default"]),A=r.isSupported="function"==typeof XMLHttpRequest&&"function"==typeof Blob&&"function"==typeof Blob.prototype.slice},{"../error.js":12,"../logger.js":13,"../noopUrlStorage.js":14,"../upload.js":15,"./fileReader.js":1,"./fileSignature.js":2,"./httpStack.js":3,"./urlStorage.js":11}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=void 0;r["default"]=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=void 0;var d=o(e("./isCordova.js")),p=o(e("./readAsByteArray.js"));function o(e){return e&&e.__esModule?e:{default:e}}function n(e){"@babel/helpers - typeof";return n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},n(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0,o;r<t.length;r++){o=t[r];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,s(o.key),o)}}function i(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);Object.defineProperty(e,"prototype",{writable:!1});return e}function s(e){var t=u(e,"string");return"symbol"===n(t)?t:t+""}function u(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}r["default"]=function(){function e(t){a(this,e);this._file=t;this.size=t.size}i(e,[{key:"slice",value:function(e,t){if((0,d["default"])()){return(0,p["default"])(this._file.slice(e,t))}var r=this._file.slice(e,t),o=t>=this.size;return Promise.resolve({value:r,done:o})}},{key:"close",value:function(){}}]);return e}()},{"./isCordova.js":8,"./readAsByteArray.js":9}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=void 0;function n(e){"@babel/helpers - typeof";return n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},n(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0,o;r<t.length;r++){o=t[r];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,s(o.key),o)}}function i(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);Object.defineProperty(e,"prototype",{writable:!1});return e}function s(e){var t=u(e,"string");return"symbol"===n(t)?t:t+""}function u(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e){if(e===void 0)return 0;if(e.size!==void 0)return e.size;return e.length}function p(e,t){if(e.concat){return e.concat(t)}if(e instanceof Blob){return new Blob([e,t],{type:e.type})}if(e.set){var r=new e.constructor(e.length+t.length);r.set(e);r.set(t,e.length);return r}throw new Error("Unknown data type")}r["default"]=function(){function e(t){a(this,e);this._buffer=void 0;this._bufferOffset=0;this._reader=t;this._done=!1}i(e,[{key:"slice",value:function(e,t){if(e<this._bufferOffset){return Promise.reject(new Error("Requested data is before the reader's current offset"))}return this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var r=this,o=t<=this._bufferOffset+d(this._buffer);if(this._done||o){var n=this._getDataFromBuffer(e,t),a=null==n?this._done:!1;return Promise.resolve({value:n,done:a})}return this._reader.read().then(function(o){var n=o.value,a=o.done;if(a){r._done=!0}else if(r._buffer===void 0){r._buffer=n}else{r._buffer=p(r._buffer,n)}return r._readUntilEnoughDataOrDone(e,t)})}},{key:"_getDataFromBuffer",value:function(e,t){if(e>this._bufferOffset){this._buffer=this._buffer.slice(e-this._bufferOffset);this._bufferOffset=e}var r=0===d(this._buffer);if(this._done&&r){return null}return this._buffer.slice(0,t-e)}},{key:"close",value:function(){if(this._reader.cancel){this._reader.cancel()}}}]);return e}()},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=void 0;r["default"]=function(){return"undefined"!=typeof window&&("undefined"!=typeof window.PhoneGap||"undefined"!=typeof window.Cordova||"undefined"!=typeof window.cordova)}},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=function(e){return new Promise(function(t,r){var o=new FileReader;o.onload=function(){var e=new Uint8Array(o.result);t({value:e})};o.onerror=function(e){r(e)};o.readAsArrayBuffer(e)})}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=function(e){return new Promise(function(t,r){var o=new XMLHttpRequest;o.responseType="blob";o.onload=function(){var e=o.response;t(e)};o.onerror=function(e){r(e)};o.open("GET",e);o.send()})}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.canStoreURLs=r.WebStorageUrlStorage=void 0;function n(e){"@babel/helpers - typeof";return n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},n(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0,o;r<t.length;r++){o=t[r];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,s(o.key),o)}}function i(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);Object.defineProperty(e,"prototype",{writable:!1});return e}function s(e){var t=u(e,"string");return"symbol"===n(t)?t:t+""}function u(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var d=!1;try{d="localStorage"in window;var p=localStorage.getItem("tusSupport");localStorage.setItem("tusSupport",p);if(null===p)localStorage.removeItem("tusSupport")}catch(t){if(t.code===t.SECURITY_ERR||t.code===t.QUOTA_EXCEEDED_ERR){d=!1}else{throw t}}var f=r.canStoreURLs=d,c=r.WebStorageUrlStorage=function(){function e(){a(this,e)}i(e,[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){localStorage.removeItem(e);return Promise.resolve()}},{key:"addUpload",value:function(e,t){var r=Math.round(1e12*Math.random()),o="tus::".concat(e,"::").concat(r);localStorage.setItem(o,JSON.stringify(t));return Promise.resolve(o)}},{key:"_findEntries",value:function(e){for(var t=[],r=0,o;r<localStorage.length;r++){o=localStorage.key(r);if(0!==o.indexOf(e))continue;try{var n=JSON.parse(localStorage.getItem(o));n.urlStorageKey=o;t.push(n)}catch(t){}}return t}}]);return e}()},{}],12:[function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},n(e)}Object.defineProperty(r,"__esModule",{value:!0});r["default"]=void 0;function a(e,t){for(var r=0,o;r<t.length;r++){o=t[r];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,s(o.key),o)}}function l(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);Object.defineProperty(e,"prototype",{writable:!1});return e}function s(e){var t=u(e,"string");return"symbol"===n(t)?t:t+""}function u(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});Object.defineProperty(e,"prototype",{writable:!1});if(t)b(e,t)}function f(e){var t=m();return function(){var r=v(e),o;if(t){var n=v(this).constructor;o=Reflect.construct(r,arguments,n)}else{o=r.apply(this,arguments)}return c(this,o)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t)){return t}else if(void 0!==t){throw new TypeError("Derived constructors may only return object or undefined")}return h(e)}function h(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function y(e){var t="function"==typeof Map?new Map:void 0;y=function(e){if(null===e||!_(e))return e;if("function"!=typeof e){throw new TypeError("Super expression must either be null or a function")}if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return g(e,arguments,v(this).constructor)}r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return b(r,e)};return y(e)}function g(){if(m()){g=Reflect.construct.bind()}else{g=function(e,t,r){var o=[null];o.push.apply(o,t);var n=Function.bind.apply(e,o),a=new n;if(r)b(a,r.prototype);return a}}return g.apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return!0}catch(t){return!1}}function _(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(r){return"function"==typeof t}}function b(e,t){b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){e.__proto__=t;return e};return b(e,t)}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}var w=function(e){p(t,e);var r=f(t);function t(e){var o,n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;d(this,t);o=r.call(this,e);o.originalRequest=a;o.originalResponse=l;o.causingError=n;if(null!=n){e+=", caused by ".concat(n.toString())}if(null!=a){var i=a.getHeader("X-Request-ID")||"n/a",s=a.getMethod(),u=a.getURL(),p=l?l.getStatus():"n/a",f=l?l.getBody()||"":"n/a";e+=", originated from request (method: ".concat(s,", url: ").concat(u,", response code: ").concat(p,", response text: ").concat(f,", request id: ").concat(i,")")}o.message=e;return o}return l(t)}(y(Error)),U=r["default"]=w},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.enableDebugLog=function(){n=!0};r.log=o;var n=!1;function o(e){if(!n)return;console.log(e)}},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=void 0;function n(e){"@babel/helpers - typeof";return n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},n(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0,o;r<t.length;r++){o=t[r];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,s(o.key),o)}}function i(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);Object.defineProperty(e,"prototype",{writable:!1});return e}function s(e){var t=u(e,"string");return"symbol"===n(t)?t:t+""}function u(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}r["default"]=function(){function e(){a(this,e)}i(e,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(){return Promise.resolve([])}},{key:"removeUpload",value:function(){return Promise.resolve()}},{key:"addUpload",value:function(){return Promise.resolve(null)}}]);return e}()},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=void 0;var O=e("js-base64"),I=o(e("url-parse")),D=o(e("./error.js")),z=e("./logger.js"),T=o(e("./uuid.js"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){l=function(){return h};var A,h={},e=Object.prototype,t=e.hasOwnProperty,C=Object.defineProperty||function(o,t,e){o[t]=e.value},r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(o,t,e){return Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),o[t]}try{s({},"")}catch(e){s=function(o,t,e){return o[t]=e}}function f(o,t,e,r){var n=t&&t.prototype instanceof _?t:_,l=Object.create(n.prototype),a=new L(r||[]);return C(l,"_invoke",{value:S(o,e,a)}),l}function m(o,t,e){try{return{type:"normal",arg:o.call(t,e)}}catch(e){return{type:"throw",arg:e}}}h.wrap=f;var c={};function _(){}function b(){}function w(){}var i={};s(i,n,function(){return this});var u=Object.getPrototypeOf,d=u&&u(u(B([])));d&&d!==e&&t.call(d,n)&&(i=d);var v=w.prototype=_.prototype=Object.create(i);function U(r){["next","throw","return"].forEach(function(o){s(r,o,function(e){return this._invoke(o,e)})})}function x(n,o){function l(e,r,s,i){var a=m(n[e],n,r);if("throw"!==a.type){var d=a.arg,u=d.value;return u&&"object"==y(u)&&t.call(u,"__await")?o.resolve(u.__await).then(function(e){l("next",e,s,i)},function(e){l("throw",e,s,i)}):o.resolve(u).then(function(e){d.value=e,s(d)},function(e){return l("throw",e,s,i)})}i(a.arg)}var i;C(this,"_invoke",{value:function(a,t){function e(){return new o(function(o,e){l(a,t,o,e)})}return i=i?i.then(e,e):e()}})}function S(t,e,r){var n="suspendedStart";return function(o,l){if(n=="executing")throw new Error("Generator is already running");if(n=="completed"){if("throw"===o)throw l;return{value:A,done:!0}}for(r.method=o,r.arg=l;;){var a=r.delegate;if(a){var i=P(a,r);if(i){if(i===c)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n=="suspendedStart")throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=m(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===c)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function P(t,e){var r=e.method,n=t.iterator[r];if(n===A)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=A,P(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),c;var o=m(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,c;var l=o.arg;return l?l.done?(e[t.resultName]=l.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=A),e.delegate=null,c):l:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function E(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function k(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function B(a){if(a||""===a){var e=a[n];if(e)return e.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var r=-1,l=function e(){for(;++r<a.length;){if(t.call(a,r))return e.value=a[r],e.done=!1,e}return e.value=A,e.done=!0,e};return l.next=l}}throw new TypeError(y(a)+" is not iterable")}return b.prototype=w,C(v,"constructor",{value:w,configurable:!0}),C(w,"constructor",{value:b,configurable:!0}),b.displayName=s(w,a,"GeneratorFunction"),h.isGeneratorFunction=function(r){var t="function"==typeof r&&r.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},h.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,s(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},h.awrap=function(e){return{__await:e}},U(x.prototype),s(x.prototype,o,function(){return this}),h.AsyncIterator=x,h.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var l=new x(f(e,t,r,n),o);return h.isGeneratorFunction(t)?l:l.next().then(function(e){return e.done?e.value:l.next()})},U(v),s(v,a,"Generator"),s(v,n,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),h.keys=function(o){var a=Object(o),e=[];for(var t in a){e.push(t)}return e.reverse(),function r(){for(;e.length;){var o=e.pop();if(o in a)return r.value=o,r.done=!1,r}return r.done=!0,r}},h.values=B,L.prototype={constructor:L,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=A,this.done=!1,this.delegate=null,this.method="next",this.arg=A,this.tryEntries.forEach(k),!o)for(var e in this){"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=A)}},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(l){if(this.done)throw l;var s=this;function e(e,t){return i.type="throw",i.arg=l,s.next=e,t&&(s.method="next",s.arg=A),!!t}for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r],i=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var a=t.call(n,"catchLoc"),d=t.call(n,"finallyLoc");if(a&&d){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(n,l){for(var e=this.tryEntries.length-1,s;0<=e;--e){s=this.tryEntries[e];if(s.tryLoc<=this.prev&&t.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var u=s;break}}u&&("break"===n||"continue"===n)&&u.tryLoc<=l&&l<=u.finallyLoc&&(u=null);var d=u?u.completion:{};return d.type=n,d.arg=l,u?(this.method="next",this.next=u.finallyLoc,c):this.complete(d)},complete:function(r,t){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&t&&(this.next=t),c},finish:function(o){for(var t=this.tryEntries.length-1,n;0<=t;--t){n=this.tryEntries[t];if(n.finallyLoc===o)return this.complete(n.completion,n.afterLoc),k(n),c}},catch:function(a){for(var t=this.tryEntries.length-1,l;0<=t;--t){l=this.tryEntries[t];if(l.tryLoc===a){var i=l.completion;if("throw"===i.type){var n=i.arg;k(l)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:B(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=A),c}},h}function i(e,t,r,o,n,a,l){try{var i=e[a](l),s=i.value}catch(e){r(e);return}if(i.done){t(s)}else{Promise.resolve(s).then(o,n)}}function s(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var s=e.apply(t,r);function a(e){i(s,o,n,a,l,"next",e)}function l(e){i(s,o,n,a,l,"throw",e)}a(void 0)})}}function u(e,t){return h(e)||c(e,t)||p(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor)r=e.constructor.name;if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}function f(e,t){if(null==t||t>e.length)t=e.length;for(var r=0,o=Array(t);r<t;r++){o[r]=e[r]}return o}function c(s,r){var l=null==s?null:"undefined"!=typeof Symbol&&s[Symbol.iterator]||s["@@iterator"];if(null!=l){var d,p,c,h,y=[],a=!0,g=!1;try{if(c=(l=l.call(s)).next,0===r){if(Object(l)!==l)return;a=!1}else for(;!(a=(d=c.call(l)).done)&&(y.push(d.value),y.length!==r);a=!0){}}catch(e){g=!0,p=e}finally{try{if(!a&&null!=l["return"]&&(h=l["return"](),Object(h)!==h))return}finally{if(g)throw p}}return y}}function h(e){if(Array.isArray(e))return e}function y(e){"@babel/helpers - typeof";return y="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},y(e)}function g(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function m(o){for(var e=1,n;e<arguments.length;e++){n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach(function(e){_(o,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function _(e,t,r){t=U(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0})}else{e[t]=r}return e}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){for(var r=0,o;r<t.length;r++){o=t[r];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,U(o.key),o)}}function w(e,t,r){if(t)v(e.prototype,t);if(r)v(e,r);Object.defineProperty(e,"prototype",{writable:!1});return e}function U(e){var t=x(e,"string");return"symbol"===y(t)?t:t+""}function x(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if("object"!==y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var q=function(){function e(t,r){b(this,e);if("resume"in r){console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead.")}this.options=r;this.options.chunkSize=+this.options.chunkSize;this._urlStorage=this.options.urlStorage;this.file=t;this.url=null;this._req=null;this._fingerprint=null;this._urlStorageKey=null;this._offset=null;this._aborted=!1;this._size=null;this._source=null;this._retryAttempt=0;this._retryTimeout=null;this._offsetBeforeRetry=0;this._parallelUploads=null;this._parallelUploadUrls=null}w(e,[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then(function(t){return e._urlStorage.findUploadsByFingerprint(t)})}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null;this._parallelUploadUrls=e.parallelUploadUrls||null;this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(!t){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var r=this.options.retryDelays;if(null!=r&&"[object Array]"!==Object.prototype.toString.call(r)){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(1<this.options.parallelUploads){for(var o=0,n=["uploadUrl","uploadSize","uploadLengthDeferred"],a;o<n.length;o++){a=n[o];if(this.options[a]){this._emitError(new Error("tus: cannot use the ".concat(a," option when parallelUploads is enabled")));return}}}if(this.options.parallelUploadBoundaries){if(1>=this.options.parallelUploads){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(t,this.options).then(function(r){if(null==r){(0,z.log)("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.")}else{(0,z.log)("Calculated fingerprint: ".concat(r))}e._fingerprint=r;if(e._source){return e._source}return e.options.fileReader.openFile(t,e.options.chunkSize)}).then(function(t){e._source=t;if(e.options.uploadLengthDeferred){e._size=null}else if(null!=e.options.uploadSize){e._size=+e.options.uploadSize;if(Number.isNaN(e._size)){e._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else{e._size=e._source.size;if(null==e._size){e._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}}if(1<e.options.parallelUploads||null!=e._parallelUploadUrls){e._startParallelUpload()}else{e._startSingleUpload()}})["catch"](function(t){e._emitError(t)})}},{key:"_startParallelUpload",value:function(){var t,r=this,o=this._size,n=0;this._parallelUploads=[];var a=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,l=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:j(this._source.size,a);if(this._parallelUploadUrls){l.forEach(function(e,t){e.uploadUrl=r._parallelUploadUrls[t]||null})}this._parallelUploadUrls=Array(l.length);var i=l.map(function(t,a){var i=0;return r._source.slice(t.start,t.end).then(function(s){var u=s.value;return new Promise(function(s,d){var p=m(m({},r.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:m(m({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:s,onError:d,onProgress:function(e){n=n-i+e;i=e;r._emitProgress(n,o)},onUploadUrlAvailable:function(){r._parallelUploadUrls[a]=f.url;if(r._parallelUploadUrls.filter(function(e){return!!e}).length===l.length){r._saveUploadInUrlStorage()}}}),f=new e(u,p);f.start();r._parallelUploads.push(f)})})}),s;Promise.all(i).then(function(){s=r._openRequest("POST",r.options.endpoint);s.setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var e=S(r.options.metadata);if(""!==e){s.setHeader("Upload-Metadata",e)}return r._sendRequest(s,null)}).then(function(e){if(!P(e.getStatus(),200)){r._emitHttpError(s,e,"tus: unexpected response while creating upload");return}var t=e.getHeader("Location");if(null==t){r._emitHttpError(s,e,"tus: invalid or missing Location header");return}r.url=R(r.options.endpoint,t);(0,z.log)("Created upload at ".concat(r.url));r._emitSuccess()})["catch"](function(e){r._emitError(e)})}},{key:"_startSingleUpload",value:function(){this._aborted=!1;if(null!=this.url){(0,z.log)("Resuming upload from previous URL: ".concat(this.url));this._resumeUpload();return}if(null!=this.options.uploadUrl){(0,z.log)("Resuming upload from provided URL: ".concat(this.options.uploadUrl));this.url=this.options.uploadUrl;this._resumeUpload();return}(0,z.log)("Creating a new upload");this._createUpload()}},{key:"abort",value:function(t){var r=this;if(null!=this._parallelUploads){this._parallelUploads.forEach(function(e){e.abort(t)})}if(null!==this._req){this._req.abort()}this._aborted=!0;if(null!=this._retryTimeout){clearTimeout(this._retryTimeout);this._retryTimeout=null}if(!t||null==this.url){return Promise.resolve()}return e.terminate(this.url,this.options).then(function(){return r._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(e,t,r,o){this._emitError(new D["default"](r,o,e,t))}},{key:"_emitError",value:function(e){var t=this;if(this._aborted)return;if(null!=this.options.retryDelays){var r=null!=this._offset&&this._offset>this._offsetBeforeRetry;if(r){this._retryAttempt=0}if(A(e,this._retryAttempt,this.options)){var o=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset;this._retryTimeout=setTimeout(function(){t.start()},o);return}}if("function"==typeof this.options.onError){this.options.onError(e)}else{throw e}}},{key:"_emitSuccess",value:function(){if(this.options.removeFingerprintOnSuccess){this._removeFromUrlStorage()}if("function"==typeof this.options.onSuccess){this.options.onSuccess()}}},{key:"_emitProgress",value:function(e,t){if("function"==typeof this.options.onProgress){this.options.onProgress(e,t)}}},{key:"_emitChunkComplete",value:function(e,t,r){if("function"==typeof this.options.onChunkComplete){this.options.onChunkComplete(e,t,r)}}},{key:"_createUpload",value:function(){var e=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var t=this._openRequest("POST",this.options.endpoint);if(this.options.uploadLengthDeferred){t.setHeader("Upload-Defer-Length",1)}else{t.setHeader("Upload-Length",this._size)}var r=S(this.options.metadata);if(""!==r){t.setHeader("Upload-Metadata",r)}var o;if(this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred){this._offset=0;o=this._addChunkToRequest(t)}else{o=this._sendRequest(t,null)}o.then(function(r){if(!P(r.getStatus(),200)){e._emitHttpError(t,r,"tus: unexpected response while creating upload");return}var o=r.getHeader("Location");if(null==o){e._emitHttpError(t,r,"tus: invalid or missing Location header");return}e.url=R(e.options.endpoint,o);(0,z.log)("Created upload at ".concat(e.url));if("function"==typeof e.options.onUploadUrlAvailable){e.options.onUploadUrlAvailable()}if(0===e._size){e._emitSuccess();e._source.close();return}e._saveUploadInUrlStorage().then(function(){if(e.options.uploadDataDuringCreation){e._handleUploadResponse(t,r)}else{e._offset=0;e._performUpload()}})})["catch"](function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)})}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url),r=this._sendRequest(t,null);r.then(function(r){var o=r.getStatus();if(!P(o,200)){if(423===o){e._emitHttpError(t,r,"tus: upload is currently locked; retry later");return}if(P(o,400)){e._removeFromUrlStorage()}if(!e.options.endpoint){e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}e.url=null;e._createUpload();return}var n=parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(n)){e._emitHttpError(t,r,"tus: invalid or missing offset value");return}var a=parseInt(r.getHeader("Upload-Length"),10);if(Number.isNaN(a)&&!e.options.uploadLengthDeferred){e._emitHttpError(t,r,"tus: invalid or missing length value");return}if("function"==typeof e.options.onUploadUrlAvailable){e.options.onUploadUrlAvailable()}e._saveUploadInUrlStorage().then(function(){if(n===a){e._emitProgress(a,a);e._emitSuccess();return}e._offset=n;e._performUpload()})})["catch"](function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)})}},{key:"_performUpload",value:function(){var e=this;if(this._aborted){return}var t;if(this.options.overridePatchMethod){t=this._openRequest("POST",this.url);t.setHeader("X-HTTP-Method-Override","PATCH")}else{t=this._openRequest("PATCH",this.url)}t.setHeader("Upload-Offset",this._offset);var r=this._addChunkToRequest(t);r.then(function(r){if(!P(r.getStatus(),200)){e._emitHttpError(t,r,"tus: unexpected response while uploading chunk");return}e._handleUploadResponse(t,r)})["catch"](function(r){if(e._aborted){return}e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),r)})}},{key:"_addChunkToRequest",value:function(e){var t=this,r=this._offset,o=this._offset+this.options.chunkSize;e.setProgressHandler(function(e){t._emitProgress(r+e,t._size)});e.setHeader("Content-Type","application/offset+octet-stream");if((o===1/0||o>this._size)&&!this.options.uploadLengthDeferred){o=this._size}return this._source.slice(r,o).then(function(r){var o=r.value,n=r.done,a=o&&o.size?o.size:0;if(t.options.uploadLengthDeferred&&n){t._size=t._offset+a;e.setHeader("Upload-Length",t._size)}var l=t._offset+a;if(!t.options.uploadLengthDeferred&&n&&l!==t._size){return Promise.reject(new Error("upload was configured with a size of ".concat(t._size," bytes, but the source is done after ").concat(l," bytes")))}if(null===o){return t._sendRequest(e)}t._emitProgress(t._offset,t._size);return t._sendRequest(e,o)})}},{key:"_handleUploadResponse",value:function(e,t){var r=parseInt(t.getHeader("Upload-Offset"),10);if(Number.isNaN(r)){this._emitHttpError(e,t,"tus: invalid or missing offset value");return}this._emitProgress(r,this._size);this._emitChunkComplete(r-this._offset,r,this._size);this._offset=r;if(r===this._size){this._emitSuccess();this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(e,t){var r=E(e,t,this.options);this._req=r;return r}},{key:"_removeFromUrlStorage",value:function(){var e=this;if(!this._urlStorageKey)return;this._urlStorage.removeUpload(this._urlStorageKey)["catch"](function(t){e._emitError(t)});this._urlStorageKey=null}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey){return Promise.resolve()}var t={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};if(this._parallelUploads){t.parallelUploadUrls=this._parallelUploadUrls}else{t.uploadUrl=this.url}return this._urlStorage.addUpload(this._fingerprint,t).then(function(t){e._urlStorageKey=t})}},{key:"_sendRequest",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return k(e,t,this.options)}}],[{key:"terminate",value:function(t){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},o=E("DELETE",t,r);return k(o,null,r).then(function(e){if(204===e.getStatus()){return}throw new D["default"]("tus: unexpected response while terminating upload",null,o,e)})["catch"](function(n){if(!(n instanceof D["default"])){n=new D["default"]("tus: failed to terminate upload",n,o,null)}if(!A(n,0,r)){throw n}var a=r.retryDelays[0],l=r.retryDelays.slice(1),i=m(m({},r),{},{retryDelays:l});return new Promise(function(e){return setTimeout(e,a)}).then(function(){return e.terminate(t,i)})})}}]);return e}();function S(e){return Object.entries(e).map(function(e){var t=u(e,2),r=t[0],o=t[1];return"".concat(r," ").concat(O.Base64.encode(o+""))}).join(",")}function P(e,t){return e>=t&&e<t+100}function E(e,t,r){var o=r.httpStack.createRequest(e,t);o.setHeader("Tus-Resumable","1.0.0");var n=r.headers||{};Object.entries(n).forEach(function(e){var t=u(e,2),r=t[0],n=t[1];o.setHeader(r,n)});if(r.addRequestId){var a=(0,T["default"])();o.setHeader("X-Request-ID",a)}return o}function k(){return L.apply(this,arguments)}function L(){L=s(l().mark(function e(t,r,o){var n;return l().wrap(function(e){while(1){switch(e.prev=e.next){case 0:if(!("function"==typeof o.onBeforeRequest)){e.next=3;break}e.next=3;return o.onBeforeRequest(t);case 3:e.next=5;return t.send(r);case 5:n=e.sent;if(!("function"==typeof o.onAfterResponse)){e.next=9;break}e.next=9;return o.onAfterResponse(t,n);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop();}}},e)}));return L.apply(this,arguments)}function B(){var e=!0;if("undefined"!=typeof navigator&&!1===navigator.onLine){e=!1}return e}function A(e,t,r){if(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest){return!1}if(r&&"function"==typeof r.onShouldRetry){return r.onShouldRetry(e,t,r)}return C(e)}function C(e){var t=e.originalResponse?e.originalResponse.getStatus():0;return(!P(t,400)||409===t||423===t)&&B()}function R(e,t){return new I["default"](t,e).toString()}function j(e,t){for(var r=Math.floor(e/t),o=[],n=0;n<t;n++){o.push({start:r*n,end:r*(n+1)})}o[t-1].end=e;return o}q.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:C,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null};r["default"]=q},{"./error.js":12,"./logger.js":13,"./uuid.js":16,"js-base64":20,"url-parse":23}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r["default"]=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),r="x"===e?t:8|3&t;return r.toString(16)})}},{}],17:[function(e,t,r){'use strict';r.byteLength=function(e){var t=o(e),r=t[0],n=t[1];return 3*(r+n)/4-n};r.toByteArray=a;r.fromByteArray=u;for(var d=[],p=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,y=c.length;h<y;++h){d[h]=c[h];p[c.charCodeAt(h)]=h}p[45]=62;p[95]=63;function o(e){var t=e.length;if(0<t%4){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(-1===r)r=t;var o=r===t?0:4-r%4;return[r,o]}function n(e,t,r){return 3*(t+r)/4-r}function a(e){var t,r=o(e),a=r[0],l=r[1],s=new f(n(e,a,l)),u=0,d=0<l?a-4:a,c;for(c=0;c<d;c+=4){t=p[e.charCodeAt(c)]<<18|p[e.charCodeAt(c+1)]<<12|p[e.charCodeAt(c+2)]<<6|p[e.charCodeAt(c+3)];s[u++]=255&t>>16;s[u++]=255&t>>8;s[u++]=255&t}if(2===l){t=p[e.charCodeAt(c)]<<2|p[e.charCodeAt(c+1)]>>4;s[u++]=255&t}if(1===l){t=p[e.charCodeAt(c)]<<10|p[e.charCodeAt(c+1)]<<4|p[e.charCodeAt(c+2)]>>2;s[u++]=255&t>>8;s[u++]=255&t}return s}function l(e){return d[63&e>>18]+d[63&e>>12]+d[63&e>>6]+d[63&e]}function s(e,t,r){for(var o,n=[],a=t;a<r;a+=3){o=(16711680&e[a]<<16)+(65280&e[a+1]<<8)+(255&e[a+2]);n.push(l(o))}return n.join("")}function u(e){for(var t,r=e.length,o=r%3,n=[],a=16383,l=0,u=r-o;l<u;l+=a){n.push(s(e,l,l+a>u?u:l+a))}if(1===o){t=e[r-1];n.push(d[t>>2]+d[63&t<<4]+"==")}else if(2===o){t=(e[r-2]<<8)+e[r-1];n.push(d[t>>10]+d[63&t>>4]+d[63&t<<2]+"=")}return n.join("")}},{}],18:[function(e,t,r){(function(){(function(){'use strict';var Y=e("base64-js"),K=e("ieee754");r.Buffer=o;r.SlowBuffer=function(e){if(+e!=e){e=0}return o.alloc(+e)};r.INSPECT_MAX_BYTES=50;r.kMaxLength=2147483647;o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42}};return 42===e.foo()}catch(t){return!1}}();if(!o.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&"function"==typeof console.error){console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function get(){if(!o.isBuffer(this))return;return this.buffer}});Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function get(){if(!o.isBuffer(this))return;return this.byteOffset}});function t(e){if(e>2147483647){throw new RangeError("The value \""+e+"\" is invalid for option \"size\"")}var t=new Uint8Array(e);t.__proto__=o.prototype;return t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t){throw new TypeError("The \"string\" argument must be of type string. Received type number")}return i(e)}return n(e,t,r)}if("undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o){Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})}o.poolSize=8192;function n(e,t,r){if("string"==typeof e){return s(e,t)}if(ArrayBuffer.isView(e)){return u(e)}if(null==e){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof2(e))}if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer)){return d(e,t,r)}if("number"==typeof e){throw new TypeError("The \"value\" argument must not be of type number. Received type number")}var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e){return o.from(n,t,r)}var a=p(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive]){return o.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof2(e))}o.from=function(e,t,r){return n(e,t,r)};o.prototype.__proto__=Uint8Array.prototype;o.__proto__=Uint8Array;function a(e){if("number"!=typeof e){throw new TypeError("\"size\" argument must be of type number")}else if(0>e){throw new RangeError("The value \""+e+"\" is invalid for option \"size\"")}}function l(e,r,o){a(e);if(0>=e){return t(e)}if(r!==void 0){return"string"==typeof o?t(e).fill(r,o):t(e).fill(r)}return t(e)}o.alloc=function(e,t,r){return l(e,t,r)};function i(e){a(e);return t(0>e?0:0|f(e))}o.allocUnsafe=function(e){return i(e)};o.allocUnsafeSlow=function(e){return i(e)};function s(e,r){if("string"!=typeof r||""===r){r="utf8"}if(!o.isEncoding(r)){throw new TypeError("Unknown encoding: "+r)}var n=0|c(e,r),a=t(n),l=a.write(e,r);if(l!==n){a=a.slice(0,l)}return a}function u(e){for(var r=0>e.length?0:0|f(e.length),o=t(r),n=0;n<r;n+=1){o[n]=255&e[n]}return o}function d(e,t,r){if(0>t||e.byteLength<t){throw new RangeError("\"offset\" is outside of buffer bounds")}if(e.byteLength<t+(r||0)){throw new RangeError("\"length\" is outside of buffer bounds")}var n;if(t===void 0&&r===void 0){n=new Uint8Array(e)}else if(r===void 0){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}n.__proto__=o.prototype;return n}function p(e){if(o.isBuffer(e)){var r=0|f(e.length),n=t(r);if(0===n.length){return n}e.copy(n,0,0,r);return n}if(e.length!==void 0){if("number"!=typeof e.length||G(e.length)){return t(0)}return u(e)}if("Buffer"===e.type&&Array.isArray(e.data)){return u(e.data)}}function f(e){if(e>=2147483647){throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes")}return 0|e}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype};o.compare=function(e,t){if(N(e,Uint8Array))e=o.from(e,e.offset,e.byteLength);if(N(t,Uint8Array))t=o.from(t,t.offset,t.byteLength);if(!o.isBuffer(e)||!o.isBuffer(t)){throw new TypeError("The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array")}if(e===t)return 0;for(var r=e.length,n=t.length,l=0,s=Math.min(r,n);l<s;++l){if(e[l]!==t[l]){r=e[l];n=t[l];break}}if(r<n)return-1;if(n<r)return 1;return 0};o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}};o.concat=function(e,t){if(!Array.isArray(e)){throw new TypeError("\"list\" argument must be an Array of Buffers")}if(0===e.length){return o.alloc(0)}var r;if(t===void 0){t=0;for(r=0;r<e.length;++r){t+=e[r].length}}var n=o.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var l=e[r];if(N(l,Uint8Array)){l=o.from(l)}if(!o.isBuffer(l)){throw new TypeError("\"list\" argument must be an Array of Buffers")}l.copy(n,a);a+=l.length}return n};function c(e,t){if(o.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||N(e,ArrayBuffer)){return e.byteLength}if("string"!=typeof e){throw new TypeError("The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type "+_typeof2(e))}var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;var a=!1;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(a){return n?-1:T(e).length}t=(""+t).toLowerCase();a=!0;}}}o.byteLength=c;function h(e,t,r){var o=!1;if(t===void 0||0>t){t=0}if(t>this.length){return""}if(r===void 0||r>this.length){r=this.length}if(0>=r){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(!0){switch(e){case"hex":return B(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();o=!0;}}}o.prototype._isBuffer=!0;function y(e,t,r){var o=e[t];e[t]=e[r];e[r]=o}o.prototype.swap16=function(){var e=this.length;if(0!=e%2){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var t=0;t<e;t+=2){y(this,t,t+1)}return this};o.prototype.swap32=function(){var e=this.length;if(0!=e%4){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var t=0;t<e;t+=4){y(this,t,t+3);y(this,t+1,t+2)}return this};o.prototype.swap64=function(){var e=this.length;if(0!=e%8){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var t=0;t<e;t+=8){y(this,t,t+7);y(this,t+1,t+6);y(this,t+2,t+5);y(this,t+3,t+4)}return this};o.prototype.toString=function(){var e=this.length;if(0===e)return"";if(0===arguments.length)return P(this,0,e);return h.apply(this,arguments)};o.prototype.toLocaleString=o.prototype.toString;o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(this===e)return!0;return 0===o.compare(this,e)};o.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();if(this.length>t)e+=" ... ";return"<Buffer "+e+">"};o.prototype.compare=function(e,t,r,n,a){if(N(e,Uint8Array)){e=o.from(e,e.offset,e.byteLength)}if(!o.isBuffer(e)){throw new TypeError("The \"target\" argument must be one of type Buffer or Uint8Array. Received type "+_typeof2(e))}if(t===void 0){t=0}if(r===void 0){r=e?e.length:0}if(n===void 0){n=0}if(a===void 0){a=this.length}if(0>t||r>e.length||0>n||a>this.length){throw new RangeError("out of range index")}if(n>=a&&t>=r){return 0}if(n>=a){return-1}if(t>=r){return 1}t>>>=0;r>>>=0;n>>>=0;a>>>=0;if(this===e)return 0;for(var l=a-n,s=r-t,u=Math.min(l,s),d=this.slice(n,a),p=e.slice(t,r),f=0;f<u;++f){if(d[f]!==p[f]){l=d[f];s=p[f];break}}if(l<s)return-1;if(s<l)return 1;return 0};function g(e,t,r,n,a){if(0===e.length)return-1;if("string"==typeof r){n=r;r=0}else if(2147483647<r){r=2147483647}else if(-2147483648>r){r=-2147483648}r=+r;if(G(r)){r=a?0:e.length-1}if(0>r)r=e.length+r;if(r>=e.length){if(a)return-1;else r=e.length-1}else if(0>r){if(a)r=0;else return-1}if("string"==typeof t){t=o.from(t,n)}if(o.isBuffer(t)){if(0===t.length){return-1}return m(e,t,r,n,a)}else if("number"==typeof t){t=255&t;if("function"==typeof Uint8Array.prototype.indexOf){if(a){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return m(e,[t],r,n,a)}throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,o,n){var l=1,s=e.length,u=t.length;if(o!==void 0){o=(o+"").toLowerCase();if("ucs2"===o||"ucs-2"===o||"utf16le"===o||"utf-16le"===o){if(2>e.length||2>t.length){return-1}l=2;s/=2;u/=2;r/=2}}function a(e,t){if(1==l){return e[t]}else{return e.readUInt16BE(t*l)}}var d;if(n){var p=-1;for(d=r;d<s;d++){if(a(e,d)===a(t,-1===p?0:d-p)){if(-1===p)p=d;if(d-p+1===u)return p*l}else{if(-1!==p)d-=d-p;p=-1}}}else{if(r+u>s)r=s-u;for(d=r;0<=d;d--){for(var f=!0,c=0;c<u;c++){if(a(e,d+c)!==a(t,c)){f=!1;break}}if(f)return d}}return-1}o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)};o.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)};o.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)};function _(e,t,r,o){r=+r||0;var n=e.length-r;if(!o){o=n}else{o=+o;if(o>n){o=n}}var a=t.length;if(o>a/2){o=a/2}for(var l=0,s;l<o;++l){s=parseInt(t.substr(2*l,2),16);if(G(s))return l;e[r+l]=s}return l}function b(e,t,r,o){return M(T(t,e.length-r),e,r,o)}function v(e,t,r,o){return M(q(t),e,r,o)}function w(e,t,r,o){return v(e,t,r,o)}function U(e,t,r,o){return M(F(t),e,r,o)}function x(e,t,r,o){return M(H(t,e.length-r),e,r,o)}o.prototype.write=function(e,t,r,o){if(t===void 0){o="utf8";r=this.length;t=0}else if(r===void 0&&"string"==typeof t){o=t;r=this.length;t=0}else if(isFinite(t)){t=t>>>0;if(isFinite(r)){r=r>>>0;if(o===void 0)o="utf8"}else{o=r;r=void 0}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var n=this.length-t;if(r===void 0||r>n)r=n;if(0<e.length&&(0>r||0>t)||t>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!o)o="utf8";var a=!1;for(;;){switch(o){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return v(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return U(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase();a=!0;}}};o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(e,t,r){if(0===t&&r===e.length){return Y.fromByteArray(e)}else{return Y.fromByteArray(e.slice(t,r))}}function P(e,t,r){r=Math.min(e.length,r);var o=[],n=t;while(n<r){var a=e[n],l=null,s=239<a?4:223<a?3:191<a?2:1;if(n+s<=r){var u,d,p,f;switch(s){case 1:if(128>a){l=a}break;case 2:u=e[n+1];if(128==(192&u)){f=(31&a)<<6|63&u;if(127<f){l=f}}break;case 3:u=e[n+1];d=e[n+2];if(128==(192&u)&&128==(192&d)){f=(15&a)<<12|(63&u)<<6|63&d;if(2047<f&&(55296>f||57343<f)){l=f}}break;case 4:u=e[n+1];d=e[n+2];p=e[n+3];if(128==(192&u)&&128==(192&d)&&128==(192&p)){f=(15&a)<<18|(63&u)<<12|(63&d)<<6|63&p;if(65535<f&&1114112>f){l=f}}}}if(null===l){l=65533;s=1}else if(65535<l){l-=65536;o.push(55296|1023&l>>>10);l=56320|1023&l}o.push(l);n+=s}return E(o)}function E(e){var t=e.length;if(t<=4096){return String.fromCharCode.apply(String,e)}var r="",o=0;while(o<t){r+=String.fromCharCode.apply(String,e.slice(o,o+=4096))}return r}function k(e,t,r){var o="";r=Math.min(e.length,r);for(var n=t;n<r;++n){o+=String.fromCharCode(127&e[n])}return o}function L(e,t,r){var o="";r=Math.min(e.length,r);for(var n=t;n<r;++n){o+=String.fromCharCode(e[n])}return o}function B(e,t,r){var o=e.length;if(!t||0>t)t=0;if(!r||0>r||r>o)r=o;for(var n="",a=t;a<r;++a){n+=z(e[a])}return n}function A(e,t,r){for(var o=e.slice(t,r),n="",a=0;a<o.length;a+=2){n+=String.fromCharCode(o[a]+256*o[a+1])}return n}o.prototype.slice=function(e,t){var r=this.length;e=~~e;t=t===void 0?r:~~t;if(0>e){e+=r;if(0>e)e=0}else if(e>r){e=r}if(0>t){t+=r;if(0>t)t=0}else if(t>r){t=r}if(t<e)t=e;var n=this.subarray(e,t);n.__proto__=o.prototype;return n};function C(e,t,r){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUIntLE=function(e,t,r){e=e>>>0;t=t>>>0;if(!r)C(e,t,this.length);var o=this[e],n=1,a=0;while(++a<t&&(n*=256)){o+=this[e+a]*n}return o};o.prototype.readUIntBE=function(e,t,r){e=e>>>0;t=t>>>0;if(!r){C(e,t,this.length)}var o=this[e+--t],n=1;while(0<t&&(n*=256)){o+=this[e+--t]*n}return o};o.prototype.readUInt8=function(e,t){e=e>>>0;if(!t)C(e,1,this.length);return this[e]};o.prototype.readUInt16LE=function(e,t){e=e>>>0;if(!t)C(e,2,this.length);return this[e]|this[e+1]<<8};o.prototype.readUInt16BE=function(e,t){e=e>>>0;if(!t)C(e,2,this.length);return this[e]<<8|this[e+1]};o.prototype.readUInt32LE=function(e,t){e=e>>>0;if(!t)C(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]};o.prototype.readUInt32BE=function(e,t){e=e>>>0;if(!t)C(e,4,this.length);return 16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])};o.prototype.readIntLE=function(e,t,r){e=e>>>0;t=t>>>0;if(!r)C(e,t,this.length);var o=this[e],n=1,a=0;while(++a<t&&(n*=256)){o+=this[e+a]*n}n*=128;if(o>=n)o-=Math.pow(2,8*t);return o};o.prototype.readIntBE=function(e,t,r){e=e>>>0;t=t>>>0;if(!r)C(e,t,this.length);var o=t,n=1,a=this[e+--o];while(0<o&&(n*=256)){a+=this[e+--o]*n}n*=128;if(a>=n)a-=Math.pow(2,8*t);return a};o.prototype.readInt8=function(e,t){e=e>>>0;if(!t)C(e,1,this.length);if(!(128&this[e]))return this[e];return-1*(255-this[e]+1)};o.prototype.readInt16LE=function(e,t){e=e>>>0;if(!t)C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r};o.prototype.readInt16BE=function(e,t){e=e>>>0;if(!t)C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r};o.prototype.readInt32LE=function(e,t){e=e>>>0;if(!t)C(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};o.prototype.readInt32BE=function(e,t){e=e>>>0;if(!t)C(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};o.prototype.readFloatLE=function(e,t){e=e>>>0;if(!t)C(e,4,this.length);return K.read(this,e,!0,23,4)};o.prototype.readFloatBE=function(e,t){e=e>>>0;if(!t)C(e,4,this.length);return K.read(this,e,!1,23,4)};o.prototype.readDoubleLE=function(e,t){e=e>>>0;if(!t)C(e,8,this.length);return K.read(this,e,!0,52,8)};o.prototype.readDoubleBE=function(e,t){e=e>>>0;if(!t)C(e,8,this.length);return K.read(this,e,!1,52,8)};function R(e,t,r,n,a,l){if(!o.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>a||t<l)throw new RangeError("\"value\" argument is out of bounds");if(r+n>e.length)throw new RangeError("Index out of range")}o.prototype.writeUIntLE=function(e,t,r,o){e=+e;t=t>>>0;r=r>>>0;if(!o){var n=Math.pow(2,8*r)-1;R(this,e,t,r,n,0)}var a=1,l=0;this[t]=255&e;while(++l<r&&(a*=256)){this[t+l]=255&e/a}return t+r};o.prototype.writeUIntBE=function(e,t,r,o){e=+e;t=t>>>0;r=r>>>0;if(!o){var n=Math.pow(2,8*r)-1;R(this,e,t,r,n,0)}var a=r-1,l=1;this[t+a]=255&e;while(0<=--a&&(l*=256)){this[t+a]=255&e/l}return t+r};o.prototype.writeUInt8=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,1,255,0);this[t]=255&e;return t+1};o.prototype.writeUInt16LE=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,2,65535,0);this[t]=255&e;this[t+1]=e>>>8;return t+2};o.prototype.writeUInt16BE=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,2,65535,0);this[t]=e>>>8;this[t+1]=255&e;return t+2};o.prototype.writeUInt32LE=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,4,4294967295,0);this[t+3]=e>>>24;this[t+2]=e>>>16;this[t+1]=e>>>8;this[t]=255&e;return t+4};o.prototype.writeUInt32BE=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,4,4294967295,0);this[t]=e>>>24;this[t+1]=e>>>16;this[t+2]=e>>>8;this[t+3]=255&e;return t+4};o.prototype.writeIntLE=function(e,t,r,o){e=+e;t=t>>>0;if(!o){var n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}var a=0,l=1,s=0;this[t]=255&e;while(++a<r&&(l*=256)){if(0>e&&0===s&&0!==this[t+a-1]){s=1}this[t+a]=255&(e/l>>0)-s}return t+r};o.prototype.writeIntBE=function(e,t,r,o){e=+e;t=t>>>0;if(!o){var n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}var a=r-1,l=1,s=0;this[t+a]=255&e;while(0<=--a&&(l*=256)){if(0>e&&0===s&&0!==this[t+a+1]){s=1}this[t+a]=255&(e/l>>0)-s}return t+r};o.prototype.writeInt8=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,1,127,-128);if(0>e)e=255+e+1;this[t]=255&e;return t+1};o.prototype.writeInt16LE=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,2,32767,-32768);this[t]=255&e;this[t+1]=e>>>8;return t+2};o.prototype.writeInt16BE=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,2,32767,-32768);this[t]=e>>>8;this[t+1]=255&e;return t+2};o.prototype.writeInt32LE=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,4,2147483647,-2147483648);this[t]=255&e;this[t+1]=e>>>8;this[t+2]=e>>>16;this[t+3]=e>>>24;return t+4};o.prototype.writeInt32BE=function(e,t,r){e=+e;t=t>>>0;if(!r)R(this,e,t,4,2147483647,-2147483648);if(0>e)e=4294967295+e+1;this[t]=e>>>24;this[t+1]=e>>>16;this[t+2]=e>>>8;this[t+3]=255&e;return t+4};function j(e,t,r,o){if(r+o>e.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("Index out of range")}function O(e,t,r,o,n){t=+t;r=r>>>0;if(!n){j(e,t,r,4,34028234663852886e22,-34028234663852886e22)}K.write(e,t,r,o,23,4);return r+4}o.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)};o.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)};function I(e,t,r,o,n){t=+t;r=r>>>0;if(!n){j(e,t,r,8,17976931348623157e292,-17976931348623157e292)}K.write(e,t,r,o,52,8);return r+8}o.prototype.writeDoubleLE=function(e,t,r){return I(this,e,t,!0,r)};o.prototype.writeDoubleBE=function(e,t,r){return I(this,e,t,!1,r)};o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(!r)r=0;if(!n&&0!==n)n=this.length;if(t>=e.length)t=e.length;if(!t)t=0;if(0<n&&n<r)n=r;if(n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t){throw new RangeError("targetStart out of bounds")}if(0>r||r>=this.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("sourceEnd out of bounds");if(n>this.length)n=this.length;if(e.length-t<n-r){n=e.length-t+r}var a=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin){this.copyWithin(t,r,n)}else if(this===e&&r<t&&t<n){for(var l=a-1;0<=l;--l){e[l+t]=this[l+r]}}else{Uint8Array.prototype.set.call(e,this.subarray(r,n),t)}return a};o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t){n=t;t=0;r=this.length}else if("string"==typeof r){n=r;r=this.length}if(n!==void 0&&"string"!=typeof n){throw new TypeError("encoding must be a string")}if("string"==typeof n&&!o.isEncoding(n)){throw new TypeError("Unknown encoding: "+n)}if(1===e.length){var a=e.charCodeAt(0);if("utf8"===n&&128>a||"latin1"===n){e=a}}}else if("number"==typeof e){e=255&e}if(0>t||this.length<t||this.length<r){throw new RangeError("Out of range index")}if(r<=t){return this}t=t>>>0;r=r===void 0?this.length:r>>>0;if(!e)e=0;var l;if("number"==typeof e){for(l=t;l<r;++l){this[l]=e}}else{var s=o.isBuffer(e)?e:o.from(e,n),u=s.length;if(0===u){throw new TypeError("The value \""+e+"\" is invalid for argument \"value\"")}for(l=0;l<r-t;++l){this[l+t]=s[l%u]}}return this};var X=/[^+/0-9A-Za-z-_]/g;function D(e){e=e.split("=")[0];e=e.trim().replace(X,"");if(2>e.length)return"";while(0!=e.length%4){e=e+"="}return e}function z(e){if(16>e)return"0"+e.toString(16);return e.toString(16)}function T(e,t){t=t||1/0;for(var r,o=e.length,n=null,a=[],l=0;l<o;++l){r=e.charCodeAt(l);if(55295<r&&57344>r){if(!n){if(56319<r){if(-1<(t-=3))a.push(239,191,189);continue}else if(l+1===o){if(-1<(t-=3))a.push(239,191,189);continue}n=r;continue}if(56320>r){if(-1<(t-=3))a.push(239,191,189);n=r;continue}r=(n-55296<<10|r-56320)+65536}else if(n){if(-1<(t-=3))a.push(239,191,189)}n=null;if(128>r){if(0>(t-=1))break;a.push(r)}else if(2048>r){if(0>(t-=2))break;a.push(192|r>>6,128|63&r)}else if(65536>r){if(0>(t-=3))break;a.push(224|r>>12,128|63&r>>6,128|63&r)}else if(1114112>r){if(0>(t-=4))break;a.push(240|r>>18,128|63&r>>12,128|63&r>>6,128|63&r)}else{throw new Error("Invalid code point")}}return a}function q(e){for(var t=[],r=0;r<e.length;++r){t.push(255&e.charCodeAt(r))}return t}function H(e,t){for(var r,o,n,a=[],l=0;l<e.length;++l){if(0>(t-=2))break;r=e.charCodeAt(l);o=r>>8;n=r%256;a.push(n);a.push(o)}return a}function F(e){return Y.toByteArray(D(e))}function M(e,t,r,o){for(var n=0;n<o;++n){if(n+r>=t.length||n>=e.length)break;t[n+r]=e[n]}return n}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!==e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":17,buffer:18,ieee754:19}],19:[function(e,t,r){r.read=function(t,r,o,n,a){var l,u,p=8*a-n-1,f=(1<<p)-1,c=f>>1,h=-7,y=o?a-1:0,g=o?-1:1,d=t[r+y];y+=g;l=d&(1<<-h)-1;d>>=-h;h+=p;for(;0<h;l=256*l+t[r+y],y+=g,h-=8){}u=l&(1<<-h)-1;l>>=-h;h+=n;for(;0<h;u=256*u+t[r+y],y+=g,h-=8){}if(0===l){l=1-c}else if(l===f){return u?NaN:(d?-1:1)*(1/0)}else{u=u+Math.pow(2,n);l=l-c}return(d?-1:1)*u*Math.pow(2,l-n)};r.write=function(t,r,o,n,a,l){var u,p,f,h=8*l-a-1,y=(1<<h)-1,g=y>>1,_=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:l-1,v=n?1:-1,d=0>r||0===r&&0>1/r?1:0;r=Math.abs(r);if(isNaN(r)||r===1/0){p=isNaN(r)?1:0;u=y}else{u=Math.floor(Math.log(r)/Math.LN2);if(1>r*(f=Math.pow(2,-u))){u--;f*=2}if(1<=u+g){r+=_/f}else{r+=_*Math.pow(2,1-g)}if(2<=r*f){u++;f/=2}if(u+g>=y){p=0;u=y}else if(1<=u+g){p=(r*f-1)*Math.pow(2,a);u=u+g}else{p=r*Math.pow(2,g-1)*Math.pow(2,a);u=0}}for(;8<=a;t[o+b]=255&p,b+=v,p/=256,a-=8){}u=u<<a|p;h+=a;for(;0<h;t[o+b]=255&u,b+=v,u/=256,h-=8){}t[o+b-v]|=128*d}},{}],20:[function(t,r,o){(function(t,n){(function(){(function(t,n){"object"===_typeof2(o)&&"undefined"!=typeof r?r.exports=n():"function"==typeof e&&e.amd?e(n):function(){var e=t.Base64,r=n();r.noConflict=function(){t.Base64=e;return r};if(t.Meteor){Base64=r}t.Base64=r}()})("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:this,function(){'use strict';var e="function"==typeof atob,t="function"==typeof btoa,r="function"==typeof n,o="function"==typeof TextDecoder?new TextDecoder:void 0,a="function"==typeof TextEncoder?new TextEncoder:void 0,l=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),s=function(e){var t={};e.forEach(function(e,r){return t[e]=r});return t}(l),u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),p="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){return new Uint8Array(Array.prototype.slice.call(e,0))},f=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,function(e){return"+"==e?"-":"_"})},c=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},h=function(e){for(var t,r,o,n,a="",s=e.length%3,u=0;u<e.length;){if(255<(r=e.charCodeAt(u++))||255<(o=e.charCodeAt(u++))||255<(n=e.charCodeAt(u++)))throw new TypeError("invalid character found");t=r<<16|o<<8|n;a+=l[63&t>>18]+l[63&t>>12]+l[63&t>>6]+l[63&t]}return s?a.slice(0,s-3)+"===".substring(s):a},y=t?function(e){return btoa(e)}:r?function(e){return n.from(e,"binary").toString("base64")}:h,g=r?function(e){return n.from(e).toString("base64")}:function(e){for(var t=4096,r=[],o=0,n=e.length;o<n;o+=t){r.push(d.apply(null,e.subarray(o,o+t)))}return y(r.join(""))},m=function(e,t){if(void 0===t){t=!1}return t?f(g(e)):g(e)},_=function(e){if(2>e.length){var t=e.charCodeAt(0);return 128>t?e:2048>t?d(192|t>>>6)+d(128|63&t):d(224|15&t>>>12)+d(128|63&t>>>6)+d(128|63&t)}else{var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return d(240|7&t>>>18)+d(128|63&t>>>12)+d(128|63&t>>>6)+d(128|63&t)}},b=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,v=function(e){return e.replace(b,_)},w=r?function(e){return n.from(e,"utf8").toString("base64")}:a?function(e){return g(a.encode(e))}:function(e){return y(v(e))},U=function(e,t){if(void 0===t){t=!1}return t?f(w(e)):w(e)},x=function(e){return U(e,!0)},S=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,P=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return d((r>>>10)+55296)+d((1023&r)+56320);case 3:return d((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return d((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1));}},E=function(e){return e.replace(S,P)},k=function(e){e=e.replace(/\s+/g,"");if(!u.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,r="",o,n,a=0;a<e.length;){t=s[e.charAt(a++)]<<18|s[e.charAt(a++)]<<12|(o=s[e.charAt(a++)])<<6|(n=s[e.charAt(a++)]);r+=64===o?d(255&t>>16):64===n?d(255&t>>16,255&t>>8):d(255&t>>16,255&t>>8,255&t)}return r},L=e?function(e){return atob(c(e))}:r?function(e){return n.from(e,"base64").toString("binary")}:k,B=r?function(e){return p(n.from(e,"base64"))}:function(e){return p(L(e).split("").map(function(e){return e.charCodeAt(0)}))},A=function(e){return B(R(e))},C=r?function(e){return n.from(e,"base64").toString("utf8")}:o?function(e){return o.decode(B(e))}:function(e){return E(L(e))},R=function(e){return c(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}))},j=function(e){return C(R(e))},O=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},I=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,O(t))};e("fromBase64",function(){return j(this)});e("toBase64",function(e){return U(this,e)});e("toBase64URI",function(){return U(this,!0)});e("toBase64URL",function(){return U(this,!0)});e("toUint8Array",function(){return A(this)})},D=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,O(t))};e("toBase64",function(e){return m(this,e)});e("toBase64URI",function(){return m(this,!0)});e("toBase64URL",function(){return m(this,!0)})},z={version:"3.7.5",VERSION:"3.7.5",atob:L,atobPolyfill:k,btoa:y,btoaPolyfill:h,fromBase64:j,toBase64:U,encode:U,encodeURI:x,encodeURL:x,utob:v,btou:E,decode:j,isValid:function isValid(e){if("string"!=typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:m,toUint8Array:A,extendString:I,extendUint8Array:D,extendBuiltins:function extendBuiltins(){I();D()}};z.Base64={};Object.keys(z).forEach(function(e){return z.Base64[e]=z[e]});return z})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{buffer:18}],21:[function(e,t,r){'use strict';var l=Object.prototype.hasOwnProperty,i;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function n(e){try{return encodeURIComponent(e)}catch(t){return null}}function a(e){var t=/([^=?#&]+)=?([^&]*)/g,r={},n;while(n=t.exec(e)){var a=o(n[1]),l=o(n[2]);if(null===a||null===l||a in r)continue;r[a]=l}return r}r.stringify=function(e,t){t=t||"";var r=[],o,a;if("string"!=typeof t)t="?";for(a in e){if(l.call(e,a)){o=e[a];if(!o&&(null===o||o===i||isNaN(o))){o=""}a=n(a);o=n(o);if(null===a||null===o)continue;r.push(a+"="+o)}}return r.length?t+r.join("&"):""};r.parse=a},{}],22:[function(e,t){'use strict';t.exports=function(e,t){t=t.split(":")[0];e=+e;if(!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1;}return 0!==e}},{}],23:[function(e,t){(function(r){(function(){'use strict';var d=e("requires-port"),p=e("querystringify"),f=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,c=/[\n\r\t]/g,h=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,y=/:\d+$/,g=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,m=/^[a-zA-Z]:/;function o(e){return(e?e:"").toString().replace(f,"")}var _=[["#","hash"],["?","query"],function(e,t){return a(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],b={hash:1,query:1};function n(e){var t;if("undefined"!=typeof window)t=window;else if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else t={};var o=t.location||{};e=e||o;var n={},a=_typeof2(e),l;if("blob:"===e.protocol){n=new s(unescape(e.pathname),{})}else if("string"===a){n=new s(e,{});for(l in b){delete n[l]}}else if("object"===a){for(l in e){if(l in b)continue;n[l]=e[l]}if(n.slashes===void 0){n.slashes=h.test(e.href)}}return n}function a(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function l(e,t){e=o(e);e=e.replace(c,"");t=t||{};var r=g.exec(e),n=r[1]?r[1].toLowerCase():"",l=!!r[2],i=!!r[3],s=0,u;if(l){if(i){u=r[2]+r[3]+r[4];s=r[2].length+r[3].length}else{u=r[2]+r[4];s=r[2].length}}else{if(i){u=r[3]+r[4];s=r[3].length}else{u=r[4]}}if("file:"===n){if(2<=s){u=u.slice(2)}}else if(a(n)){u=r[4]}else if(n){if(l){u=u.slice(2)}}else if(2<=s&&a(t.protocol)){u=r[4]}return{protocol:n,slashes:l||a(n),slashesCount:s,rest:u}}function i(e,t){if(""===e)return t;var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=r.length,n=r[o-1],a=!1,l=0;while(o--){if("."===r[o]){r.splice(o,1)}else if(".."===r[o]){r.splice(o,1);l++}else if(l){if(0===o)a=!0;r.splice(o,1);l--}}if(a)r.unshift("");if("."===n||".."===n)r.push("");return r.join("/")}function s(e,t,r){e=o(e);e=e.replace(c,"");if(!(this instanceof s)){return new s(e,t,r)}var u,f,h,y,g,b,v=_.slice(),w=_typeof2(t),U=this,x=0;if("object"!==w&&"string"!==w){r=t;t=null}if(r&&"function"!=typeof r)r=p.parse;t=n(t);f=l(e||"",t);u=!f.protocol&&!f.slashes;U.slashes=f.slashes||u&&t.slashes;U.protocol=f.protocol||t.protocol||"";e=f.rest;if("file:"===f.protocol&&(2!==f.slashesCount||m.test(e))||!f.slashes&&(f.protocol||2>f.slashesCount||!a(U.protocol))){v[3]=[/(.*)/,"pathname"]}for(;x<v.length;x++){y=v[x];if("function"==typeof y){e=y(e,U);continue}h=y[0];b=y[1];if(h!==h){U[b]=e}else if("string"==typeof h){g="@"===h?e.lastIndexOf(h):e.indexOf(h);if(~g){if("number"==typeof y[2]){U[b]=e.slice(0,g);e=e.slice(g+y[2])}else{U[b]=e.slice(g);e=e.slice(0,g)}}}else if(g=h.exec(e)){U[b]=g[1];e=e.slice(0,g.index)}U[b]=U[b]||(u&&y[3]?t[b]||"":"");if(y[4])U[b]=U[b].toLowerCase()}if(r)U.query=r(U.query);if(u&&t.slashes&&"/"!==U.pathname.charAt(0)&&(""!==U.pathname||""!==t.pathname)){U.pathname=i(U.pathname,t.pathname)}if("/"!==U.pathname.charAt(0)&&a(U.protocol)){U.pathname="/"+U.pathname}if(!d(U.port,U.protocol)){U.host=U.hostname;U.port=""}U.username=U.password="";if(U.auth){g=U.auth.indexOf(":");if(~g){U.username=U.auth.slice(0,g);U.username=encodeURIComponent(decodeURIComponent(U.username));U.password=U.auth.slice(g+1);U.password=encodeURIComponent(decodeURIComponent(U.password))}else{U.username=encodeURIComponent(decodeURIComponent(U.auth))}U.auth=U.password?U.username+":"+U.password:U.username}U.origin="file:"!==U.protocol&&a(U.protocol)&&U.host?U.protocol+"//"+U.host:"null";U.href=U.toString()}function u(e){if(!e||"function"!=typeof e)e=p.stringify;var t,r=this,o=r.host,n=r.protocol;if(n&&":"!==n.charAt(n.length-1))n+=":";var l=n+(r.protocol&&r.slashes||a(r.protocol)?"//":"");if(r.username){l+=r.username;if(r.password)l+=":"+r.password;l+="@"}else if(r.password){l+=":"+r.password;l+="@"}else if("file:"!==r.protocol&&a(r.protocol)&&!o&&"/"!==r.pathname){l+="@"}if(":"===o[o.length-1]||y.test(r.hostname)&&!r.port){o+=":"}l+=o+r.pathname;t="object"===_typeof2(r.query)?e(r.query):r.query;if(t)l+="?"!==t.charAt(0)?"?"+t:t;if(r.hash)l+=r.hash;return l}s.prototype={set:function(e,t,r){var o=this;switch(e){case"query":if("string"==typeof t&&t.length){t=(r||p.parse)(t)}o[e]=t;break;case"port":o[e]=t;if(!d(t,o.protocol)){o.host=o.hostname;o[e]=""}else if(t){o.host=o.hostname+":"+t}break;case"hostname":o[e]=t;if(o.port)t+=":"+o.port;o.host=t;break;case"host":o[e]=t;if(y.test(t)){t=t.split(":");o.port=t.pop();o.hostname=t.join(":")}else{o.hostname=t;o.port=""}break;case"protocol":o.protocol=t.toLowerCase();o.slashes=!r;break;case"pathname":case"hash":if(t){var n="pathname"===e?"/":"#";o[e]=t.charAt(0)!==n?n+t:t}else{o[e]=t}break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var l=t.indexOf(":");if(~l){o.username=t.slice(0,l);o.username=encodeURIComponent(decodeURIComponent(o.username));o.password=t.slice(l+1);o.password=encodeURIComponent(decodeURIComponent(o.password))}else{o.username=encodeURIComponent(decodeURIComponent(t))}}for(var s=0,u;s<_.length;s++){u=_[s];if(u[4])o[u[1]]=o[u[1]].toLowerCase()}o.auth=o.password?o.username+":"+o.password:o.username;o.origin="file:"!==o.protocol&&a(o.protocol)&&o.host?o.protocol+"//"+o.host:"null";o.href=o.toString();return o},toString:u};s.extractProtocol=l;s.location=n;s.trimLeft=o;s.qs=p;t.exports=s}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:21,"requires-port":22}]},{},[4])(4)});
//# sourceMappingURL=tus.min.js.map
