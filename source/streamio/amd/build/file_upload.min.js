define ("mediatimesrc_streamio/file_upload",["core/log","mediatimesrc_streamio/tus"],function(a,b){var c=function(b){this.upload={};this.options={endpoint:"https://streamio.com/api/v1/videos/tus",metadata:{uploadtoken:b},onError:a.debug,onProgress:function onProgress(a,b){document.querySelectorAll(".progress").forEach(function(c){c.style.width=100*(a/b)+"%"})},onSuccess:function onSuccess(){document.getElementById("upload_resource_form").submit();a.debug(this.upload.url)}};this.addEvents()};c.prototype={options:{},upload:{},addEvents:function addEvents(){document.body.removeEventListener("click",this.handleClick.bind(this));document.body.addEventListener("click",this.handleClick.bind(this))},handleClick:function handleClick(c){var d=c.target.closest("button[name=\"upload\"]");if(d){var e=document.querySelector("input[name=\"streamiofile\"]").files[0];c.preventDefault();if(e){this.options.metadata.filename=e.name;this.options.metadata.filetype=e.type;a.debug(this.options);a.debug(b);this.upload=new b.Upload(e,this.options);this.upload.start()}}}};return{init:function init(a){var b=new c(a);return Promise.resolve(b)}}});
//# sourceMappingURL=file_upload.min.js.map
